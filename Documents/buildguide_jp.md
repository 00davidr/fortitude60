# Fortitude60 ビルドガイド
## 部品

以下の部品表は両手分の数量です。片手だけ作りたいという物好きな方は数量を半分にしてください。

|部品名|型番|数量|メモ|
|------|----|----|----|
|PCB|fortitude60 main|2枚|キット付属|
|プレート|fortitude60 plate|2枚|キット付属|
|MCU|beetle USB 32u4|2個|キット付属、デフォルトファーム書き込み済み|
|USB Type-C|AE-USB2.0-TYPE-C|2個|AE-USB-MICRO-B-Dでも代用可|
|ダイオード|1N4148 100V200mA|60個|リードタイプ、SMDタイプでも可|
|タクトスイッチ|2.54mmピッチ|2個|キット付属|
|TRRSジャック|MJ-4PP-9|2個|キット付属|
|ゴム足|大2個小2個|4個|キット付属|
|TRRSケーブル|4極ケーブル|1本|3極でも可（ただし4極必要な機能[^underglow]が使えません）|
|キースイッチ|Cherry MX系|60個|PCBマウント対応|
|キーキャップ|Cherry MX系|60個|PCBマウント対応|

[^underglow]: Underglow機能など。Backlight機能とUnderglow機能はMCUの仕様上排他となります。

以下の部品表はオプションです。必ずしも動作に必要ではありません。

|部品名|型番|数量|メモ|
|------|----|----|----|
|LED|3mm砲弾型(Vf=1.4V, 8mA)|60個|Backlight機能|
|抵抗|470ohm, リードまたは3216|60個|Backlight機能|
|抵抗|1kohm, リードまたは3216|2個|Backlight機能|
|FET|IRLML6344TRPbF(Nch MOSFET)|2個|Backlight機能|
|------|----|----|----|
|テープLED|WS2812B(フルカラーLED)|2本|Underglow機能|
|配線材|柔らかめのもの|適量|Underglow機能|

## 必要な工具

|部品名|メモ|
|------|----|
|はんだごて|セラミックヒータータイプが使いやすいです。HAKKO FX-600がおすすめ|
|はんだ|住友金属工業のスパークルハンダが個人的におすすめです|
|ニッパー|刃を閉じて光にかざしたときに隙間がないのを選びましょう|
|ピンセット|HOZAN P-891が肉厚で使いやすいです。|
|テスター|導通チェッカー機能とダイオード確認機能がついていると便利|
|マスキングテープ|仮止め用|
|折れない心|やけどなど怪我には気をつけましょう👊|


## 組み立て

基板を写真のように並べ左手側と右手側を決めます。以降の説明ではキースイッチを取り付ける面をスイッチ面、ダイオードを取り付ける面を部品面とします。

### ダイオードの取り付け

ダイオードは部品面に取り付けます、リードタイプはスイッチ面からはんだ付け、SMDは部品面からはんだ付けしてください。
ダイオードは部品に方向があり、基板上のマークの矢印方向にマークを合わせて実装します。
一部シルクにマークが潰れていますがすべて同じ方向になります。

テスターのダイオードモードで写真の部分をチェックし、はんだ付けができていることを確認します。

### TRRSジャック、タクトスイッチの取り付け

TRRSジャックとタクトスイッチは部品面のシルクに合わせて取り付け、スイッチ面からはんだ付けします。
（PCB v1.0）フットプリントの不備により、ピンを1本ずらして実装する必要があります。曲げたピンからはんだ付けして固定されることを確認してください。

TRRSケーブルを接続し、それぞれの対称のピンが導通していることを導通チェッカーで確認します。

### Backlight用LED用部品の取り付け（オプション）

バックライトLEDの抵抗を部品面に取り付けます。リードタイプはスイッチ面からはんだ付け、SMDは部品面からはんだ付けしてください。
部品に極性はありません。1箇所のみ抵抗値が異なるので気を付けてください。

はんだ付け後にはテスターで抵抗値を確認しましょう。

LEDを駆動するためのFETを部品面に取り付けます。表面実装部品のため実装難易度が高いですが、1箇所予備ハンダをして先に固定してしまえば楽になります。

### ピンヘッダの取り付け

MCU（コントローラー）とUSBコネクタを取り付けるピンヘッダを取り付けます。ピン数に合わせてピンヘッダを切断し、部品面に取り付けスイッチ面からはんだ付けします。片手のPCBにはMCUへは6ピンを3つ、USBコネクタには2ピンを2つずつはんだ付けします。

```[注意]まだこの時点ではMCUをはんだ付けしません！！！```

### キースイッチの取り付け

キースイッチを取り付けます。プレートにキースイッチをはめ込みながらスイッチ面に取り付けます。部品面の穴からすべての足が折り曲がらずに見えていることを確認してください。
スイッチを取り付ける際に写真のようにケースの一部分を軽くはめるとはんだ付けしやすいです（完全にはめたりすべてのケースを組んでしまうと分解が大変です）。
確認が終わったら部品面からはんだ付けします。

（オプション）Backlight用LEDを取り付ける場合には、スルーホールが丸い穴がアノード（＋）で四角い方がカソード（-）になります。

### MCUの準備

（C94 Limited Edition）MCUはテスト用のファームウェアが書き込み済みであり、下の写真のようにシールが貼られている方が左手側のMCUとなります。

USBコネクタとMCUをはんだ付けします。配線材を5~6cmほどの長さに4本切り出し、両端の被覆を2mm程度剥き予備ハンダをします。その後にUSBコネクタとMCUを写真のようにはんだ付けします。ピンを間違えると接続したPCを破壊する可能性があるので気をつけてください。もう片方のMCUにも同様に処理をします。

念の為テスターでUSBコネクタのGNDとMCUのGNDを導通チェックします。

（オプション）MCUにはPのシルクで電源LEDが実装されており、これが割と明るいため別にLEDを実装した場合は色が混ざったりするため必要な人はLEDを取り外すことをおすすめします。

### USBコネクタとMCUの取り付け

USBコネクタとMCUを部品面にはんだ付けします。USBコネクタに取り付け方向はありません。

MCUはマークが入っているものが左手側となり、基板上のシルクとMCUのシルクを合わせた向きで組み込みます。フットプリントをきつめに設計しているためはんだ付けしなくても動作は可能ですが、ゆるい場合や一部接触不良になる場合ははんだ付けしてください。

### Underglow用LEDテープの取り付け（オプション）

Underglowを追加する場合は、基板上にある「LED」の部分を基準に写真のように配線していきます。

### ケースの組み立て

アクリルケースは箱組の強度を上げるため寸法をきつく設計しています。アクリルの保護シートを剥がし以下の写真のように組み立ててください。片手の中に同じ形をした部品は無いため間違った場所には嵌らないようになっています。少しでも違和感を覚えたら力任せに嵌めずに場所を確認し、必要に応じてヤスリで調整するなどしてください。特に隣の辺と組み合わさる部分は割れやすいので気をつけてください。

最後に底蓋を嵌めこみます。底蓋にはゴム足を写真のように取り付けると少し傾斜ができます。逆に分解する場合にはUSBコネクタ部分の隙間に棒などを差し込んでてこの原理で外すとやりやすいです。

### 完成

## QMKファームウェアの書き込み

購入時点でテスト用ファームウェアが書き込まれているため、そのまま入力は可能です。キーマップのカスタマイズやオプション機能を使う場合は以下の手順で書き込んでください。
QMKのファームウェアのFORTITUDE60のキーボードは以下にあります。
[https://github.com/qmk/qmk_firmware/tree/master/keyboards/fortitude60](https://github.com/qmk/qmk_firmware/tree/master/keyboards/fortitude60)

2. キーマップのカスタマイズ

```/keymaps/default/```を参考に```keymap.c```を編集します。

2. Backlight機能の有効化

```/keymaps/[your keymap]/rules.mk```に```BACKLIGHT_ENABLE = yes```を追加します。

Underglow機能と両立はできません。

2. Underglow機能の有効化

```/keymaps/[your keymap]/rules.mk```の```RGBLIGHT_ENABLE = yes```を追加します。

Backlight機能と両立はできません。
